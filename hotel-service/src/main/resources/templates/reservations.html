<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Бронирования</title>
    <link th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css}" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"/>
    <link rel="stylesheet" href="/static/css/reservations.css">
</head>
<body>
<div th:insert="~{/parts/dark_navbar_macro :: dark_navbar}"></div>
<div class="container my-5">
    <div class="d-flex justify-content-center">
        <h1 class="mb-5 text-white">Бронирования</h1>
    </div>
    <form class="mb-3" method="get" th:action="@{/admin/reservations}">
        <div class="input-group">
            <input type="text" class="form-control" name="hotelName" th:value="${hotelName}" placeholder="Поиск по названию отеля">
            <button class="btn btn-dark-gold" type="submit">Поиск</button>
        </div>
    </form>
    <table class="table table-striped table-bordered table-background" th:if="${not #lists.isEmpty(reservations)}">
        <thead class="table-dark">
        <tr>
            <th>ID</th>
            <th>Въезд</th>
            <th>Выезд</th>
            <th>Почта</th>
            <th>Номер</th>
            <th>Телефон</th>
            <th>Имя</th>
            <th>Фамилия</th>
            <th>Страна</th>
            <th>Удаление</th>
        </tr>
        </thead>
        <tbody>
        <tbody>
        <tr th:each="reservation : ${reservations}">
            <td th:text="${reservation.id}"></td>
            <td th:text="${reservation.checkIn}"></td>
            <td th:text="${reservation.checkOut}"></td>
            <td th:text="${reservation.user.username}"></td>
            <td th:text="${reservation.room.number}"></td>
            <td th:text="'+' + ${reservation.phNumber}"></td>
            <td th:text="${reservation.firstName}"></td>
            <td th:text="${reservation.lastName}"></td>
            <td th:text="${reservation.country}"></td>
            <td>
                <form th:action="@{'/admin/' + ${reservation.id} + '/reservation-delete'}" method="post">
                    <button class="btn btn-danger" onclick="confirmAction()" type="submit">Удалить</button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>

    <div th:if="${not #lists.isEmpty(reservations)}">
        <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center">
                <li class="page-item" th:classappend="${page.number == 0} ? 'disabled'">
                    <a class="page-link" th:href="@{/admin/reservations(page=${page.number - 1}, size=${page.size}, hotelName=${hotelName})}" tabindex="-1">Предыдущая</a>
                </li>
                <li class="page-item" th:each="i : ${#numbers.sequence(0, page.totalPages - 1)}"
                    th:classappend="${i == page.number} ? 'active'">
                    <a class="page-link" th:href="@{/admin/reservations(page=${i}, size=${page.size}, hotelName=${hotelName})}" th:text="${i + 1}"></a>
                </li>
                <li class="page-item" th:classappend="${page.number == page.totalPages - 1} ? 'disabled'">
                    <a class="page-link" th:href="@{/admin/reservations(page=${page.number + 1}, size=${page.size}, hotelName=${hotelName})}">Следующая</a>
                </li>
            </ul>
        </nav>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    function confirmAction() {
        return confirm("Вы уверены, что хотите отменить бронирование?");
    }
</script>
</body>
</html>